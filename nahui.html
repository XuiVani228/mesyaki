<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –º–µ—Å—è—á–Ω—ã—Ö</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #fff9fb;
        }
        h1 {
            color: #d23669;
            text-align: center;
            margin-bottom: 15px;
        }
        .calendar-btn {
            background-color: #f8bbd0;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            margin-bottom: 20px;
            cursor: pointer;
            font-weight: bold;
        }
        .date-strip {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding: 10px 0;
            margin-bottom: 20px;
            width: 100%;
            scrollbar-width: none;
        }
        .date-strip::-webkit-scrollbar {
            display: none;
        }
        .date-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 50px;
            padding: 10px 5px;
            border-radius: 10px;
            cursor: pointer;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .date-item.active {
            background-color: #ffebee;
            font-weight: bold;
        }
        .date-item.period {
            background-color: #ffcdd2;
        }
        .day-name {
            font-size: 12px;
            color: #777;
        }
        .day-number {
            font-size: 16px;
            margin: 5px 0;
            font-weight: bold;
        }
        .today-indicator {
            font-size: 10px;
            color: #d23669;
            margin-top: 3px;
        }
        .main-circle {
            width: 350px;
            height: 350px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffebee, #fce4ec);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            box-shadow: 0 8px 16px rgba(210, 54, 105, 0.2);
            position: relative;
            overflow: hidden;
        }
        .current-date {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
        }
        .cycle-info {
            font-size: 16px;
            margin: 10px 0;
            text-align: center;
            min-height: 40px;
        }
        .mark-button {
            padding: 12px 25px;
            background-color: #d23669;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            margin-top: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .mark-button:hover {
            background-color: #a52a52;
            transform: scale(1.05);
        }
        .pain-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        .pain-content {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            width: 80%;
            max-width: 350px;
            text-align: center;
        }
        .pain-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .pain-option {
            padding: 12px;
            border: 2px solid #f8bbd0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            flex-basis: 40%;
            text-align: center;
        }
        .pain-option:hover {
            background-color: #ffebee;
        }
        .pain-option.selected {
            background-color: #d23669;
            color: white;
            border-color: #d23669;
        }
        .close-pain {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
        }
        .clear-all-section {
            margin-top: 50px;
            width: 100%;
            text-align: center;
            padding: 30px 0;
        }
        .clear-all-btn {
            padding: 15px 30px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.3);
        }
        .clear-all-btn:hover {
            background-color: #388e3c;
            transform: scale(1.05);
        }
        .celebration {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(76, 175, 80, 0.9);
            justify-content: center;
            align-items: center;
            z-index: 200;
            flex-direction: column;
            color: white;
            text-align: center;
            animation: celebrationBg 2s infinite alternate;
        }
        @keyframes celebrationBg {
            0% { background-color: rgba(76, 175, 80, 0.9); }
            100% { background-color: rgba(106, 185, 110, 0.9); }
        }
        .celebration h2 {
            font-size: 32px;
            margin-bottom: 20px;
            animation: bounce 1s infinite alternate;
        }
        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-15px); }
        }
        .celebration p {
            font-size: 18px;
            margin-bottom: 30px;
            max-width: 80%;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f44336;
            opacity: 0;
        }
        .calendar-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        .calendar-content {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
        }
        .month-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 15px;
        }
        .calendar-day {
            padding: 8px;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
        }
        .calendar-day.period {
            background-color: #ffcdd2;
        }
        .calendar-day.today {
            font-weight: bold;
            border: 2px solid #d23669;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .calendar-nav {
            display: flex;
            gap: 10px;
        }
        .calendar-nav button {
            background-color: #f8bbd0;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>–ú–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –º–µ—Å—è—á–Ω—ã—Ö</h1>
    
    <button class="calendar-btn" id="open-calendar">üìÖ –ü–æ–ª–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å</button>
    
    <div class="date-strip" id="date-strip">
        <!-- –õ–µ–Ω—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ JavaScript -->
    </div>
    
    <div class="main-circle">
        <div class="current-date" id="current-date"></div>
        <div class="cycle-info" id="cycle-info"></div>
        <button class="mark-button" id="mark-button">–û—Ç–º–µ—Ç–∏—Ç—å –º–µ—Å—è—á–Ω—ã–µ</button>
    </div>
    
    <div class="pain-modal" id="pain-modal">
        <div class="pain-content">
            <span class="close-pain">&times;</span>
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –±–æ–ª–∏:</h3>
            <div class="pain-options">
                <div class="pain-option" data-level="0">–ù–µ—Ç –±–æ–ª–∏</div>
                <div class="pain-option" data-level="1">–õ–µ–≥–∫–∞—è</div>
                <div class="pain-option" data-level="2">–£–º–µ—Ä–µ–Ω–Ω–∞—è</div>
                <div class="pain-option" data-level="3">–£–º–∏—Ä–∞—é</div>
                <div class="pain-option" data-level="4">–ü–∏–∑–¥–µ—Ü –ø–æ–ª–Ω—ã–π</div>
            </div>
            <button class="mark-button" id="save-pain">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>
    
    <div class="calendar-modal" id="calendar-modal">
        <div class="calendar-content">
            <div class="calendar-header">
                <h3 id="calendar-month">–ú–∞–π 2023</h3>
                <div class="calendar-nav">
                    <button id="prev-month">&lt;</button>
                    <button id="next-month">&gt;</button>
                </div>
            </div>
            <div class="month-calendar" id="month-calendar">
                <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω JavaScript -->
            </div>
        </div>
    </div>
    
    <div class="clear-all-section">
        <button class="clear-all-btn" id="clear-all-btn">üéâ–û—Ç–º–µ–Ω–∏—Ç—å –º–µ—Å—è—á–Ω—ã–µ –Ω–∞—Ö—É–π</button>
    </div>
    
    <div class="celebration" id="celebration">
        <h2>–£–†–ê–ê–ê–ê!!!</h2>
        <p>–¢—ã –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏–ª–∞—Å—å –æ—Ç —ç—Ç–æ–≥–æ! –ò–¥–∏ –æ–±—Ä–∞–¥—É–π –º—É–∂–∞!</p>
        <p>–í—Å–µ –æ—Ç–º–µ—Ç–∫–∏ –æ—á–∏—â–µ–Ω—ã!</p>
        <!-- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã JavaScript -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            let periodData = JSON.parse(localStorage.getItem('periodData')) || {};
            let selectedDate = new Date();
            let selectedPainLevel = 0;
            let lastPeriodDate = getLastPeriodDate();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            updateCurrentDateDisplay();
            renderDateStrip();
            updateCycleInfo();
            
            // –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–ª–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
            document.getElementById('open-calendar').addEventListener('click', function() {
                showCalendarModal();
            });
            
            // –í—ã–±–æ—Ä –¥–∞—Ç—ã –≤ –ª–µ–Ω—Ç–µ
            document.getElementById('date-strip').addEventListener('click', function(e) {
                const dateItem = e.target.closest('.date-item');
                if (dateItem) {
                    const dateStr = dateItem.getAttribute('data-date');
                    selectedDate = new Date(dateStr);
                    updateCurrentDateDisplay();
                    renderDateStrip();
                    updateCycleInfo();
                }
            });
            
            // –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ—Ç–∫–∏ –º–µ—Å—è—á–Ω—ã—Ö
            document.getElementById('mark-button').addEventListener('click', function() {
                if (isPeriodDay(selectedDate)) {
                    // –ï—Å–ª–∏ –¥–µ–Ω—å —É–∂–µ –æ—Ç–º–µ—á–µ–Ω, —Å–ø—Ä–∞—à–∏–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å –±–æ–ª–∏
                    showPainModal();
                } else {
                    // –û—Ç–º–µ—á–∞–µ–º –¥–µ–Ω—å –∫–∞–∫ –¥–µ–Ω—å –º–µ—Å—è—á–Ω—ã—Ö
                    markAsPeriodDay(selectedDate);
                    updateCycleInfo();
                    renderDateStrip();
                    showPainModal();
                }
            });
            
            // –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –±–æ–ª–∏
            document.querySelectorAll('.pain-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.pain-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    selectedPainLevel = parseInt(this.getAttribute('data-level'));
                });
            });
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –±–æ–ª–∏
            document.getElementById('save-pain').addEventListener('click', function() {
                const dateKey = formatDate(selectedDate);
                
                if (!periodData[dateKey]) {
                    periodData[dateKey] = {};
                }
                
                periodData[dateKey].painLevel = selectedPainLevel;
                localStorage.setItem('periodData', JSON.stringify(periodData));
                
                hidePainModal();
                renderDateStrip();
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –±–æ–ª–∏
            document.querySelector('.close-pain').addEventListener('click', hidePainModal);
            
            // –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –æ—Ç–º–µ—Ç–æ–∫
            document.getElementById('clear-all-btn').addEventListener('click', function() {
                if (confirm('–¢—ã —É–≤–µ—Ä–µ–Ω–∞, —á—Ç–æ —Ö–æ—á–µ—à—å –û–¢–ú–ï–ù–ò–¢–¨ –º–µ—Å—è—á–Ω—ã–µ –∫ —Ö—É—è–º?')) {
                    periodData = {};
                    localStorage.setItem('periodData', JSON.stringify(periodData));
                    lastPeriodDate = null;
                    updateCycleInfo();
                    renderDateStrip();
                    showCelebration();
                }
            });
            
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—é
            document.getElementById('prev-month').addEventListener('click', function() {
                currentCalendarMonth.setMonth(currentCalendarMonth.getMonth() - 1);
                renderMonthCalendar();
            });
            
            document.getElementById('next-month').addEventListener('click', function() {
                currentCalendarMonth.setMonth(currentCalendarMonth.getMonth() + 1);
                renderMonthCalendar();
            });
            
            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
            function updateCurrentDateDisplay() {
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('current-date').textContent = 
                    selectedDate.toLocaleDateString('ru-RU', options);
            }
            
            function updateCycleInfo() {
                const cycleInfoEl = document.getElementById('cycle-info');
                const dateKey = formatDate(selectedDate);
                
                if (periodData[dateKey]) {
                    const painLevels = ["–ù–µ—Ç –±–æ–ª–∏", "–õ–µ–≥–∫–∞—è", "–£–º–µ—Ä–µ–Ω–Ω–∞—è", "–£–º–∏—Ä–∞—é", "–ü–∏–∑–¥–µ—Ü –ø–æ–ª–Ω—ã–π"];
                    const painText = periodData[dateKey].painLevel !== undefined ? 
                        `–£—Ä–æ–≤–µ–Ω—å –±–æ–ª–∏: ${painLevels[periodData[dateKey].painLevel]}` : '';
                    cycleInfoEl.innerHTML = `–°–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å –º–µ—Å—è—á–Ω—ã—Ö<br>${painText}`;
                } else {
                    const daysUntil = calculateDaysUntilNextPeriod();
                    if (daysUntil !== null) {
                        cycleInfoEl.textContent = `–î–æ –º–µ—Å—è—á–Ω—ã—Ö: ${daysUntil} ${declOfNum(daysUntil, ['–¥–µ–Ω—å', '–¥–Ω—è', '–¥–Ω–µ–π'])}`;
                    } else {
                        cycleInfoEl.textContent = '–û—Ç–º–µ—Ç—å –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å –º–µ—Å—è—á–Ω—ã—Ö';
                    }
                }
            }
            
            function renderDateStrip() {
                const dateStrip = document.getElementById('date-strip');
                dateStrip.innerHTML = '';
                
                const daysToShow = 14;
                const startDate = new Date(today);
                startDate.setDate(today.getDate() - 7);
                
                for (let i = 0; i < daysToShow; i++) {
                    const currentDate = new Date(startDate);
                    currentDate.setDate(startDate.getDate() + i);
                    
                    const dateItem = document.createElement('div');
                    dateItem.className = 'date-item';
                    dateItem.setAttribute('data-date', currentDate.toISOString());
                    
                    if (isSameDay(currentDate, today)) {
                        dateItem.classList.add('active');
                    }
                    
                    if (isSameDay(currentDate, selectedDate)) {
                        dateItem.classList.add('active');
                    }
                    
                    if (isPeriodDay(currentDate)) {
                        dateItem.classList.add('period');
                    }
                    
                    const dayName = document.createElement('div');
                    dayName.className = 'day-name';
                    dayName.textContent = getDayName(currentDate);
                    
                    const dayNumber = document.createElement('div');
                    dayNumber.className = 'day-number';
                    dayNumber.textContent = currentDate.getDate();
                    
                    dateItem.appendChild(dayName);
                    dateItem.appendChild(dayNumber);
                    
                    if (isSameDay(currentDate, today)) {
                        const todayIndicator = document.createElement('div');
                        todayIndicator.className = 'today-indicator';
                        todayIndicator.textContent = '—Å–µ–≥–æ–¥–Ω—è';
                        dateItem.appendChild(todayIndicator);
                    }
                    
                    dateStrip.appendChild(dateItem);
                }
                
                const activeItem = dateStrip.querySelector('.date-item.active');
                if (activeItem) {
                    activeItem.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                }
            }
            
            function markAsPeriodDay(date) {
                const dateKey = formatDate(date);
                if (!periodData[dateKey]) {
                    periodData[dateKey] = {};
                }
                periodData[dateKey].isPeriod = true;
                localStorage.setItem('periodData', JSON.stringify(periodData));
                lastPeriodDate = date;
            }
            
            function isPeriodDay(date) {
                const dateKey = formatDate(date);
                return periodData[dateKey] && periodData[dateKey].isPeriod;
            }
            
            function calculateDaysUntilNextPeriod() {
                if (!lastPeriodDate) return null;
                
                // –°—Ä–µ–¥–Ω—è—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ü–∏–∫–ª–∞ (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π)
                const cycleLength = 28;
                const nextPeriodDate = new Date(lastPeriodDate);
                nextPeriodDate.setDate(lastPeriodDate.getDate() + cycleLength);
                
                const diffTime = nextPeriodDate - selectedDate;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                return diffDays > 0 ? diffDays : 0;
            }
            
            function getLastPeriodDate() {
                let lastDate = null;
                for (const dateKey in periodData) {
                    if (periodData[dateKey].isPeriod) {
                        const date = parseDate(dateKey);
                        if (!lastDate || date > lastDate) {
                            lastDate = date;
                        }
                    }
                }
                return lastDate;
            }
            
            function showPainModal() {
                const dateKey = formatDate(selectedDate);
                if (periodData[dateKey] && periodData[dateKey].painLevel !== undefined) {
                    selectedPainLevel = periodData[dateKey].painLevel;
                    document.querySelectorAll('.pain-option').forEach(opt => {
                        opt.classList.remove('selected');
                        if (parseInt(opt.getAttribute('data-level')) === selectedPainLevel) {
                            opt.classList.add('selected');
                        }
                    });
                } else {
                    selectedPainLevel = 0;
                    document.querySelectorAll('.pain-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    document.querySelector('.pain-option[data-level="0"]').classList.add('selected');
                }
                
                document.getElementById('pain-modal').style.display = 'flex';
            }
            
            function hidePainModal() {
                document.getElementById('pain-modal').style.display = 'none';
            }
            
            function showCelebration() {
                const celebration = document.getElementById('celebration');
                celebration.style.display = 'flex';
                
                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
                for (let i = 0; i < 50; i++) {
                    createConfetti();
                }
                
                setTimeout(() => {
                    celebration.style.display = 'none';
                }, 5000);
            }
            
            function createConfetti() {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                document.getElementById('celebration').appendChild(confetti);
                
                const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4CAF50', '#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800', '#FF5722'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                
                confetti.style.backgroundColor = randomColor;
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = -10 + 'px';
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                const animationDuration = Math.random() * 3 + 2;
                
                confetti.style.animation = `fall ${animationDuration}s linear forwards`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º CSS –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
                const style = document.createElement('style');
                style.innerHTML = `
                    @keyframes fall {
                        0% {
                            opacity: 1;
                            transform: translateY(0) rotate(0deg);
                        }
                        100% {
                            opacity: 0;
                            transform: translateY(100vh) rotate(360deg);
                        }
                    }
                `;
                document.head.appendChild(style);
                
                setTimeout(() => {
                    confetti.remove();
                    style.remove();
                }, animationDuration * 1000);
            }
            
            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
            let currentCalendarMonth = new Date();
            
            function showCalendarModal() {
                currentCalendarMonth = new Date();
                renderMonthCalendar();
                document.getElementById('calendar-modal').style.display = 'flex';
            }
            
            function renderMonthCalendar() {
                const calendarEl = document.getElementById('month-calendar');
                const monthYearEl = document.getElementById('calendar-month');
                
                calendarEl.innerHTML = '';
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–µ—Å—è—Ü–∞ –∏ –≥–æ–¥–∞
                const monthNames = ["–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å",
                                  "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"];
                monthYearEl.textContent = `${monthNames[currentCalendarMonth.getMonth()]} ${currentCalendarMonth.getFullYear()}`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏
                const dayNames = ["–ü–Ω", "–í—Ç", "–°—Ä", "–ß—Ç", "–ü—Ç", "–°–±", "–í—Å"];
                dayNames.forEach(day => {
                    const dayHeader = document.createElement('div');
                    dayHeader.style.fontWeight = 'bold';
                    dayHeader.textContent = day;
                    calendarEl.appendChild(dayHeader);
                });
                
                // –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –≤ –º–µ—Å—è—Ü–µ
                const firstDay = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth(), 1);
                const lastDay = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth() + 1, 0);
                const daysInMonth = lastDay.getDate();
                
                // –ü–æ–ª—É—á–∞–µ–º –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è –º–µ—Å—è—Ü–∞ (0 - –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 1 - –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –∏ —Ç.–¥.)
                let firstDayOfWeek = firstDay.getDay();
                if (firstDayOfWeek === 0) firstDayOfWeek = 7; // –î–µ–ª–∞–µ–º –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 7-–º –¥–Ω–µ–º
                
                // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –¥–ª—è –¥–Ω–µ–π –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞
                for (let i = 1; i < firstDayOfWeek; i++) {
                    const emptyDay = document.createElement('div');
                    emptyDay.className = 'calendar-day';
                    calendarEl.appendChild(emptyDay);
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–Ω–∏ –º–µ—Å—è—Ü–∞
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayEl = document.createElement('div');
                    dayEl.className = 'calendar-day';
                    dayEl.textContent = day;
                    
                    const currentDate = new Date(currentCalendarMonth.getFullYear(), currentCalendarMonth.getMonth(), day);
                    if (isPeriodDay(currentDate)) {
                        dayEl.classList.add('period');
                    }
                    
                    if (isSameDay(currentDate, today)) {
                        dayEl.classList.add('today');
                    }
                    
                    dayEl.addEventListener('click', function() {
                        selectedDate = currentDate;
                        updateCurrentDateDisplay();
                        updateCycleInfo();
                        renderDateStrip();
                        document.getElementById('calendar-modal').style.display = 'none';
                    });
                    
                    calendarEl.appendChild(dayEl);
                }
            }
            
            // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
            function formatDate(date) {
                const d = new Date(date);
                let month = '' + (d.getMonth() + 1);
                let day = '' + d.getDate();
                const year = d.getFullYear();
                
                if (month.length < 2) month = '0' + month;
                if (day.length < 2) day = '0' + day;
                
                return [year, month, day].join('-');
            }
            
            function parseDate(dateStr) {
                const parts = dateStr.split('-');
                return new Date(parts[0], parts[1] - 1, parts[2]);
            }
            
            function getDayName(date) {
                const days = ['–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±'];
                return days[date.getDay()];
            }
            
            function isSameDay(date1, date2) {
                return date1.getFullYear() === date2.getFullYear() &&
                       date1.getMonth() === date2.getMonth() &&
                       date1.getDate() === date2.getDate();
            }
            
            function declOfNum(number, titles) {  
                const cases = [2, 0, 1, 1, 1, 2];  
                return titles[ (number%100>4 && number%100<20)? 2 : cases[(number%10<5)?number%10:5] ];  
            }
        });
    </script>
</body>
</html>